<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <ui:composition template="/templates/modeloGeral.xhtml">

        <ui:define name="metadata">
            <f:metadata>
                <f:event listener="#{ListarEmpreendimentosView.listarTodosEmpreendimentos()}" type="preRenderView"/>
                <f:event listener="#{ListarMembrosEptsView.ListarMembrosEpts()}" type="preRenderView"/>

            </f:metadata>
        </ui:define>

        <ui:define name="conteudo" >
            <h:form id="frmListagemEmpreendimentos" >
                <p:growl id="msgs" showDetail="true" showSummary="false" />

                <p:toolbar>
                    <f:facet name="left" >
                        <h:outputText value="" />
                    </f:facet>
                </p:toolbar>
                <p:panel styleClass="corPanel" header="Lista de contatos:" >
                    <p:tabView>
                        <p:tab title="Usuários ativos" >
                            <p:dataTable id="ListagemUsuarios" emptyMessage="Nenhum usuário encontrado." 
                                         value="#{ListarUsuariosView.listaUsuarios}" rows="12" paginator="true" 
                                         paginatorPosition="top" var="usuarioCursor" widgetVar="varGlobalUsuarios" >
                                <f:facet name="footer" >
                                    <h:commandLink id="pdfUsr">
                                        <p:graphicImage name="icons24/Pdf24.png" width="24"/>
                                        <p:dataExporter type="pdf" target="ListagemUsuarios" fileName="Metas" encoding="ISO-8859-1" />
                                    </h:commandLink>
                                    
                                    <p:spacer height="20px"/>

                                    <h:commandLink id="xlsUsr">
                                        <p:graphicImage name="icons24/Xls24.png" width="24"/>
                                        <p:dataExporter type="xls" target="ListagemUsuarios" fileName="Metas" />
                                    </h:commandLink>
                                    
                                    <p:tooltip for="pdfUsr" value="Exportar para PDF" />
                                    <p:tooltip for="xlsUsr" value="Exportar para Excel" />
                                </f:facet>

                                <p:column headerText="Nome: " filterBy="#{usuarioCursor.nome}" 
                                          sortBy="#{usuarioCursor.nome}" filterMatchMode="contains">
                                    <h:outputText value="#{usuarioCursor.nome}"/>
                                </p:column>

                                <p:column headerText="E-mail: " filterBy="#{usuarioCursor.email}" 
                                          sortBy="#{usuarioCursor.email}" filterMatchMode="contains">
                                    <h:outputText value="#{usuarioCursor.email}"/>
                                </p:column>

                                <p:column headerText="Telefone: " filterBy="#{usuarioCursor.telefone}" filterMatchMode="contains">
                                    <h:outputText value="#{usuarioCursor.telefone}"/>
                                </p:column>

                                <p:column headerText="Telefone alternativo: " filterBy="#{usuarioCursor.telefoneAlternativo}" 
                                          filterMatchMode="contains">
                                    <h:outputText value="#{usuarioCursor.telefoneAlternativo}"/>
                                </p:column>

                                <p:column filterBy="#{usuarioCursor.cargo}" headerText="Cargo" filterMatchMode="exact">
                                    <f:facet name="filter">
                                        <p:selectOneMenu onchange="PF('varGlobalUsuarios').filter()" >
                                            <f:selectItem itemLabel="Não filtrar" itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItems value="#{ListarUsuariosView.cargos}" />
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{usuarioCursor.cargo}" />
                                </p:column>
                            </p:dataTable>
                        </p:tab>

                        <p:tab title="Empreendimentos">
                            <p:dataTable id="dtContatosEmpreendimentos" emptyMessage="Nenhum empreendimento encontrado." 
                                         value="#{ListarEmpreendimentosView.listaEmpreendimentos}" rows="12" paginator="true" paginatorPosition="top"
                                         var="empreendimentoCursor" widgetVar="varGlobalEmpreendimentos">
                                
                                <f:facet name="footer" >
                                    <h:commandLink id="pdfEpt">
                                        <p:graphicImage name="icons24/Pdf24.png" width="24"/>
                                        <p:dataExporter type="pdf" target="dtContatosEmpreendimentos" fileName="Metas" encoding="ISO-8859-1" />
                                    </h:commandLink>
                                    
                                    <p:spacer height="20px"/>

                                    <h:commandLink id="xlsEpt">
                                        <p:graphicImage name="icons24/Xls24.png" width="24"/>
                                        <p:dataExporter type="xls" target="dtContatosEmpreendimentos" fileName="Metas" />
                                    </h:commandLink>
                                    
                                    <p:tooltip for="pdfEpt" value="Exportar para PDF" />
                                    <p:tooltip for="xlsEpt" value="Exportar para Excel" />
                                </f:facet>

                                <p:column headerText="Nome fantasia:" filterBy="#{empreendimentoCursor.nome}" 
                                          sortBy="#{empreendimentoCursor.nome}" filterMatchMode="contains">
                                    <h:outputText value="#{empreendimentoCursor.nome}"/>
                                </p:column>

                                <p:column headerText="E-mail: " filterBy="#{empreendimentoCursor.email}" 
                                          sortBy="#{empreendimentoCursor.email}" filterMatchMode="contains">
                                    <h:outputText value="#{empreendimentoCursor.email}"/>
                                </p:column>

                                <p:column headerText="Telefone: " filterBy="#{empreendimentoCursor.telefone}" filterMatchMode="contains">
                                    <h:outputText value="#{empreendimentoCursor.teltelefone>
                                </p:column>

                                <p:column headerText="Telefone alternativo: " filterBy="#{empreendimentoCursor.telefoneAlternativoEpt}"
                                          filterMatchMode="contains">
                                    <h:outputText value="#{empreendimentoCursor.telefoneAlternativoEpt}"/>
                                </p:column>

                                <p:column filterBy="#{empreendimentoCursor.situacaoEpt}" headerText="Processo de Incubação" filterMatchMode="exact">
                                    <f:facet name="filter">
                                        <p:selectOneMenu onchange="PF('varGlobalEmpreendimentos').filter()" >
                                            <f:selectItem itemLabel="Não filtrar" itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItems value="#{ListarEmpreendimentosView.processoIncubacao}" />
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{empreendimentoCursor.situacaoEpt}" />
                                </p:column>
                            </p:dataTable>
                        </p:tab>

                        <p:tab title="Membros de empreendimentos">
                            <p:dataTable id="dtListagemMembrosEpts" emptyMessage="Nenhum membro de empreendimento encontrado." 
                                         value="#{ListarMembrosEptsView.listaMembrosEmpreendimentos}" rows="12" paginator="true"
                                         paginatorPosition="top" var="membroEmpreendimentoCursor"
                                         filteredValue="#{ListarMembrosEptsView.listaMembrosEmpreendimentosFiltrados}"
                                         rowKey="#{membroEmpreendimentoCursor.idMembroEmpreendimento}"  widgetVar="varGlobalMembro">
                                
                                <f:facet name="footer" >
                                    <h:commandLink id="pdfMep">
                                        <p:graphicImage name="icons24/Pdf24.png" width="24"/>
                                        <p:dataExporter type="pdf" target="dtListagemMembrosEpts" fileName="Metas" encoding="ISO-8859-1" />
                                    </h:commandLink>
                                    
                                    <p:spacer height="20px"/>

                                    <h:commandLink id="xlsMep">
                                        <p:graphicImage name="icons24/Xls24.png" width="24"/>
                                        <p:dataExporter type="xls" target="dtListagemMembrosEpts" fileName="Metas" />
                                    </h:commandLink>
                                    
                                    <p:tooltip for="pdfMep" value="Exportar para PDF" />
                                    <p:tooltip for="xlsMep" value="Exportar para Excel" />
                                </f:facet>

                                <p:column headerText="Nome" filterBy="#{membroEmpreendimentoCursor.nomeMembroEmpreendimento}" 
                                          sortBy="#{membroEmpreendimentoCursor.nomeMembroEmpreendimento}" filterMatchMode="contains">
                                    <h:outputText value="#{membroEmpreendimentoCursor.nomeMembroEmpreendimento}"/>
                                </p:column>

                                <p:column headerText="Apelido" filterBy="#{membroEmpreendimentoCursor.apelidoMembroEmpreendimento}" 
                                          sortBy="#{membroEmpreendimentoCursor.apelidoMembroEmpreendimento}" filterMatchMode="contains">
                                    <h:outputText value="#{membroEmpreendimentoCursor.apelidoMembroEmpreendimento}"/>
                                </p:column>

                                <p:column headerText="Telefone" filterBy="#{membroEmpreendimentoCursor.telefoneMembroEmpreendimento}" 
                                          filterMatchMode="contains">
                                    <h:outputText value="#{membroEmpreendimentoCursor.telefoneMembroEmpreendimento}"/>
                                </p:column>

                                <p:column headerText="Telefone alternativo" filterBy="#{membroEmpreendimentoCursor.telefoneAlternativoMembroEmpreendimento}" 
                                          filterMatchMode="contains">
                                    <h:outputText value="#{membroEmpreendimentoCursor.telefoneAlternativoMembroEmpreendimento}"/>
                                </p:column>

                                <p:column filterBy="#{membroEmpreendimentoCursor.empreendimento}" headerText="Empreendimento" filterMatchMode="exact">
                                    <f:facet name="filter">
                                        <p:selectOneMenu onchange="PF('varGlobalMembro').filter()" >
                                            <f:selectItem itemLabel="Não filtrar" itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItems value="#{ListarMembrosEptsView.listaEmpreendimentos}" var="ept" itemLabel="#{ept.nome}" 
                                                           itemValue="#{ept}"/>
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{membroEmpreendimentoCursor.empreendimento.nome}" />
                                </p:column>
                            </p:dataTable>
                        </p:tab>

                        <p:tab title="Parceiros">
                            <p:dataTable id="dtParceiros" emptyMessage="Nenhum parceiro encontrado." rows="12" paginator="true" paginatorPosition="top"
                                         value="#{ListarParceirosView.listaParceiros}" var="parceiroCursor" widgetVar="varGlobalParceiros">
                                
                                <f:facet name="footer" >
                                    <h:commandLink id="pdfPar">
                                        <p:graphicImage name="icons24/Pdf24.png" width="24"/>
                                        <p:dataExporter type="pdf" target="dtParceiros" fileName="Metas" encoding="ISO-8859-1" />
                                    </h:commandLink>
                                    
                                    <p:spacer height="20px"/>

                                    <h:commandLink id="xlsPar">
                                        <p:graphicImage name="icons24/Xls24.png" width="24"/>
                                        <p:dataExporter type="xls" target="dtParceiros" fileName="Metas" />
                                    </h:commandLink>
                                    
                                    <p:tooltip for="pdfPar" value="Exportar para PDF" />
                                    <p:tooltip for="xlsPar" value="Exportar para Excel" />
                                </f:facet>

                                <p:column headerText="Nome: " filterBy="#{parceiroCursor.nome}" filterMatchMode="contains"
                                          sortBy="#{parceiroCursor.nome}" >
                                    <h:outputText value="#{parceiroCursor.nome}"/>
                                </p:column>

                                <p:column headerText="E-mail: " filterBy="#{parceiroCursor.email}" filterMatchMode="contains"
                                          sortBy="#{parceiroCursor.email}" >
                                    <h:outputText value="#{parceiroCursor.email}"/>
                                </p:column>

                                <p:column headerText="Telefone: " filterBy="#{parceiroCursor.telefone}" filterMatchMode="contains">
                                    <h:outputText value="#{parceiroCursor.telefone}"/>
                                </p:column>

                                <p:column headerText="Telefone alternativo: " filterBy="#{parceiroCursor.telefoneAlternativo}" 
                                          filterMatchMode="contains">
                                    <h:outputText value="#{parceiroCursor.telefoneAlternativo}"/>
                                </p:column>
                                <f:facet name="footer"/>
                            </p:dataTable>
                        </p:tab>
                    </p:tabView>
                </p:panel>
            </h:form>
        </ui:define>

    </ui:composition>
</html>