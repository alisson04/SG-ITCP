<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:composite="http://java.sun.com/jsf/composite">

    <ui:insert name="metadata" />

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>SIGITEC - Modelo Global</title>

        <h:outputStylesheet library="css" name="icons16.css" />
        <link rel="stylesheet" href="/resources/css/icons16.css"/>
        <h:outputStylesheet library="css" name="icons24.css" />
        <link rel="stylesheet" href="/resources/css/icons24.css"/>
        <h:outputStylesheet library="css" name="icons32.css" />
        <link rel="stylesheet" href="/resources/css/icons32.css"/>
        <h:outputStylesheet library="css" name="icons128.css" />
        <link rel="stylesheet" href="/resources/css/icons128.css"/>
        <h:outputStylesheet library="css" name="estilos.css" />
        <link rel="stylesheet" href="/resources/css/estilos.css"/>
    </h:head>
    <script>
        PrimeFaces.locales['pt'] = {
            closeText: 'Fechar',
            prevText: 'Anterior',
            nextText: 'Próximo',
            currentText: 'Hoje',
            monthNames: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],
            monthNamesShort: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'],
            dayNames: ['Domingo', 'Segunda', 'Terça', 'Quarta', 'Quinta', 'Sexta', 'Sábado'],
            dayNamesShort: ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb'],
            dayNamesMin: ['D', 'S', 'T', 'Q', 'Q', 'S', 'S'],
            weekHeader: 'Semana',
            firstDay: 0,
            isRTL: false,
            showMonthAfterYear: false,
            yearSuffix: '',
            timeOnlyTitle: 'Horas',
            timeText: 'Tempo',
            hourText: 'Hora',
            minuteText: 'Minuto',
            secondText: 'Segundo',
            ampm: false,
            month: 'Mês',
            week: 'Semana',
            day: 'Dia',
            allDayText: 'Todo o Dia'
        };
    </script>

    <h:body>
        <h:form id="frmMsgGenerico">
            <p:growl showDetail="true" life="5000" />
        </h:form>

        <p:layout fullPage="true">
            <p:layoutUnit position="north" size="100" >
                <p:graphicImage id="ftmImagemTopoGeral" width="100%" height="100%" styleClass="semMargin"
                                value="./image/#{modeloGeralView.geraFotoTopo()}"/>
            </p:layoutUnit>

            <p:layoutUnit position="south" size="40" resizable="false" closable="false" collapsible="false" >
                <p:outputPanel style="text-align:center;" >
                    <h:outputText value="Todos os direitos reservados ao IFNMG - Campus Januária" />
                </p:outputPanel>
            </p:layoutUnit>

            <p:layoutUnit position="center">                
                <h:form id="frmModeloGeral">
                    <p:menubar style="ui-button" styleClass="textoMenuPrincipal semMargin">
                        <p:menuitem value="Início" icon="Home24-iconfinder" 
                                    action="/inicio.xhtml?faces-redirect=true" style="ui-widget"/>

                        <p:menuitem value="teste" icon="Home24-iconfinder" 
                                    action="/teste.xhtml?faces-redirect=true" style="ui-widget"/>

                        <p:submenu label="Incubadora" icon="Grafico24-iconfinder">

                            <p:menuitem value="Usuários" icon="Users24-iconfinder" 
                                        action="/listarUsuarios.xhtml?faces-redirect=true"/>

                            <p:menuitem value="Parceiros" icon="Parceria24-iconfinder" 
                                        action="/listarParceiros.xhtml?faces-redirect=true"/>

                            <p:menuitem value="Horários de trabalho" icon="Clock22-iconfinder" 
                                        action="/HorariosDeTrabalho.xhtml?faces-redirect=true" />

                            <p:menuitem value="Lista de contatos" icon="PhoneList24-iconfinder" 
                                        action="/listaContatos.xhtml?faces-redirect=true" />

                            <p:menuitem value="Configurações" icon="PhoneList24-iconfinder" 
                                        action="/ConfigurarSistema.xhtml?faces-redirect=true" />
                        </p:submenu>

                        <p:submenu label="Empreendimentos" icon="Grafico24-iconfinder">
                            <p:menuitem value="Empreendimentos" icon="Mala24-iconfinder" 
                                        action="/listarEmpreendimento.xhtml?faces-redirect=true" />

                            <p:menuitem value="Membros" icon="MembroEpt24-iconfinder" 
                                        action="/listarMembroEmpreendimento.xhtml?faces-redirect=true" />

                            <p:menuitem value="Indicadores" icon="MembroEpt24-iconfinder" 
                                        action="/IndicadoresMaturidade.xhtml?faces-redirect=true" /> 
                        </p:submenu>

                        <p:menuitem value="Relatórios" icon="MembroEpt24-iconfinder" 
                                    action="/Relatorios.xhtml?faces-redirect=true" /> 

                        <p:submenu label="Planos de ação" icon="Grafico24-iconfinder">
                            <p:menuitem value="Novo plano" icon="Grafico24-iconfinder" action="/novoPlano.xhtml?faces-redirect=true"/>

                            <p:menuitem value="Listar planos" icon="Grafico24-iconfinder" action="/listarPlanoAcao.xhtml?faces-redirect=true"/>

                            <p:menuitem value="Metas" icon="Target24-iconfinder" action="/listarMetas.xhtml?faces-redirect=true" />

                            <p:menuitem value="Atividades" icon="Ideia24-iconfinder" 
                                        action="/listarAtividadesPlanejadas.xhtml?faces-redirect=true"/>
                        </p:submenu>

                        <p:menuitem value="Acompanhamentos" icon="Parceria24-iconfinder" 
                                    action="/listarAcompanhamentosEpt.xhtml?faces-redirect=true"/>

                        <f:facet name="options" >
                            <p:menuButton value="Minha conta">
                                <p:menuitem value="Editar  conta" icon="Edit16-iconfinder"
                                            oncomplete="PF('UserDia').show()" update=":frmEditarMeusDados:outPaMostrarUsr" />
                                <p:menuitem value=" Sair" icon="Exit16-iconfinder" action="#{LoginView.sair()}" />
                            </p:menuButton>
                        </f:facet>
                    </p:menubar>
                </h:form>

                <!--EDIÇÂO DA MINHA CONTA-->
                <p:dialog id="diaShowUsr" header="Minha conta" widgetVar="UserDia" showEffect="fade" hideEffect="fade" 
                          resizable="false" draggable="false" modal="true"  appendTo="@(body)">
                    <h:form id="frmEditarMeusDados"><!--Necessário usar um formulária a parte, visto o bloqueio de validação-->
                        <p:outputPanel id="outPaMostrarUsr" style="text-align:center;">
                            <p:fileUpload id="upload" label="Mudar foto de perfil" mode="advanced" 
                                          update="frmEditarMeusDados"
                                          fileUploadListener="#{modeloGeralView.uploadAction}" auto="true"/>
                            <p:panel >
                                <p:graphicImage id="ftmImagemTopoGeral" width="150px" height="150px" styleClass="semMargin"
                                                value="./image/#{modeloGeralView.usuarioLogado.fotoPerfil}"/>
                            </p:panel>
                            <p:spacer height="10px"/>

                            <p:panel id="panel" style="margin-bottom:20px" >
                                <h:panelGrid id="pgEditar" style="text-align:right;" columns="3">
                                    <p:outputLabel for="nome" value="Nome: " />
                                    <p:inputText id="nome" value="#{modeloGeralView.usuarioLogado.nome}" required="true"
                                                 requiredMessage="O nome é obrigatório." size="45" maxlength="45"/>
                                    <p:message for="nome"/>

                                    <p:outputLabel for="e-mail" value="E-mail: " />  
                                    <p:inputText id="e-mail" value="#{modeloGeralView.usuarioLogado.email}" required="true"
                                                 requiredMessage="O e-mail é obrigatório." size="45" maxlength="50"/>
                                    <p:message for="e-mail"/>

                                    <p:outputLabel for="endereco" value="Endereço: "/>
                                    <p:inputText id="endereco" value="#{modeloGeralView.usuarioLogado.endereco}" size="45" maxlength="50"/>
                                    <p:message for="endereco"/>

                                    <p:outputLabel for="telefone" value="Telefone: " />
                                    <p:inputMask id="telefone" value="#{modeloGeralView.usuarioLogado.telefone}"
                                                 mask="(99) ?9-9999-9999" size="45" maxlength="11" required="true"
                                                 requiredMessage="O telefone é obrigatório."/>
                                    <p:message for="telefone"/>

                                    <p:outputLabel value="Telefone alternativo: " />
                                    <p:inputMask id="telefoneAlternativo" value="#{modeloGeralView.usuarioLogado.telefoneAlternativo}"
                                                 mask="(99) ?9-9999-9999" size="45" maxlength="11"/>
                                    <p:message for="telefoneAlternativo"/>

                                    <p:outputLabel for="rg" value="RG: " />
                                    <p:inputText id="rg" value="#{modeloGeralView.usuarioLogado.rg}" size="45" maxlength="13"/>
                                    <p:message for="rg"/>

                                    <p:outputLabel for="cpf" value="CPF: " />
                                    <p:inputMask id="cpf" value="#{modeloGeralView.usuarioLogado.cpf}"
                                                 mask="999-999-999.99" size="45" maxlength="11" />   
                                    <p:message for="cpf"/>

                                    <p:outputLabel for="dataNascimento" value="Data de nascimento: " />
                                    <p:calendar id="dataNascimento" value="#{modeloGeralView.usuarioLogado.dataNascimento}" 
                                                pattern="dd/MM/yyyy" size="45" mask="true" locale="pt" required="true" 
                                                requiredMessage="A data de nascimento é obrigatória." />
                                    <p:message for="dataNascimento"/>

                                    <p:outputLabel for="dataEntrada" value="Entrada na ITCP: " />
                                    <p:calendar id="dataEntrada" value="#{modeloGeralView.usuarioLogado.dataEntrada}" 
                                                pattern="dd/MM/yyyy" mask="true" locale="pt" size="45" required="true" 
                                                requiredMessage="A data de entrada é obrigatória." />
                                    <p:message for="dataEntrada"/>

                                    <p:outputLabel for="cargoItcp" value="Cargo: " 
                                                   rendered="#{modeloGeralView.usuarioLogado.cargo == 'Coordenador'}" />
                                    <p:selectOneMenu id="cargoItcp" required="true" requiredMessage="O cargo na ITCP é obrigatório."
                                                     value="#{modeloGeralView.usuarioLogado.cargo}" style="width:435px"
                                                     rendered="#{modeloGeralView.usuarioLogado.cargo == 'Coordenador'}">
                                        <f:selectItem itemLabel="Selecione" itemValue="" noSelectionOption="true" />
                                        <f:selectItems value="#{modeloGeralView.geraTiposDeCargosView()}" />
                                    </p:selectOneMenu>
                                    <p:message for="cargoItcp" rendered="#{modeloGeralView.usuarioLogado.cargo == 'Coordenador'}"/>

                                    <p:outputLabel for="sexo" value="Sexo: "/>  
                                    <p:selectOneRadio id="sexo" required="true" requiredMessage="O sexo é obrigatório."
                                                      value="#{modeloGeralView.usuarioLogado.sexo}">
                                        <f:selectItem itemLabel="Masculino" itemValue="Masculino"/>
                                        <f:selectItem itemLabel="Feminino" itemValue="Feminino"/>
                                        <f:selectItem itemLabel="Outro" itemValue="Outro"/>
                                    </p:selectOneRadio>
                                    <p:message for="sexo" />
                                </h:panelGrid>

                                <p:outputLabel value="* Campos obrigatórios" />

                                <p:blockUI block="outPaMostrarUsr" trigger="btnSalvar">
                                    CARREGANDO<br />
                                    <p:graphicImage name="fotos/LoadingBar.gif"/>
                                </p:blockUI>
                            </p:panel>

                            <p:commandButton id="btnSalvar" value="Salvar" icon="Save24-iconfinder" update="frmEditarMeusDados"
                                             actionListener="#{modeloGeralView.editarUserLogadoView()}" >
                                <p:confirm header="ATENÇÃO!" message="Deseja realmente salvar?" icon="Information32-iconfinder"/>
                            </p:commandButton>
                            <p:spacer width="20px" />

                            <p:commandButton value="Cancelar" type="button" icon="Cross24-iconfinder" 
                                             onclick="PF('UserDia').hide()" />
                        </p:outputPanel>

                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade" styleClass="corDialog" 
                                         style="text-align:center;">
                            <p:commandButton value="Sim" type="button" styleClass="ui-confirmdialog-yes" 
                                             icon="BlackCheck24-iconfinder" />
                            <p:commandButton value="Não" type="button" styleClass="ui-confirmdialog-no" 
                                             icon="Cross24-iconfinder" />
                        </p:confirmDialog>
                    </h:form>
                </p:dialog>

                <br></br>
                <ui:insert name="conteudo" />
            </p:layoutUnit>
        </p:layout>

    </h:body>
</html>